{"version":3,"sources":["src/domUtils.js","src/htmlElement.js","src/building.js","src/types.js","src/ruleEngine.js","src/buildingSlot.js","src/resource.js","src/resourceSlot.js","src/board.js","src/buildingFactory.js","src/resourceFactory.js","node_modules/regenerator-runtime/runtime.js","src/resourceArea.js","src/game.js","src/player.js","src/index.js","node_modules/parcel/src/builtins/hmr-runtime.js"],"names":["addCSSRule","sheet","selector","rules","index","document","styleSheets","cssRules","rule","selectorText","ruleParts","split","style","insertRule","addRule","changeClass","instance","className","div","lastClassname","addClass","includes","newClass","removeClass","classname","replace","setPosition","xPos","yPos","position","left","top","baseUrl","instanceMap","Map","MyHtmlElement","id","dragable","src","parent","createElement","classNameDefault","lastClassName","getElementById","has","set","children","length","get","child","callbackChild","undefined","append","call","idCounter","draggingBuilding","Building","game","details","owner","type","name","draggable","imgSource","playerArea","ownerArea","filter","color","ondragstart","dragStart","bind","ondragend","dragEnd","setTimeout","add","initEventListener","draggingEvent","Event","dispatchEvent","slotTypes","buildingTypes","slotType","building","street","resourceTypes","resource","TypeObject","args","arg","object","SlotType","BuildingType","isEqual","ResourceType","BuildingRules","slot","logResult","lastResult","town","isEmpty","getChild","stateY","boardRow","stateX","boardCol","state","buildingState","neigbours","y","x","n","ignoreBuildingOnStreet","hasBuildingDirectNeighbour","hasStreetDirectNeigbour","streetSlotNeighbours","buildingSlotNeighbours","currentPhase","GAME_PHASES","POPULATE","onlyOneBuildingPerSlot","onlyBuildingsAtCornors","onlyStreetsWithBuildings","twoStreetsBetweenBuildings","citiesBuildOnlyOnTowns","BuildingSlot","board","setPos","ondragover","dragOver","ondragenter","dragEnter","ondragleave","dragLeave","ondrop","dragDrop","addEventListener","buildingRules","allowed","e","preventDefault","console","log","lastBuilding","setUnplayed","isLeftUpper","isRightUpper","classSuffix","setPlayed","draggingResource","Resource","margin","ResourceSlot","boardBuildSlotTemplate","Board","buildingSlots","resourceSlots","makeRessourceSlots","makeBuildingSlots","template","resourceWidth","resourceHeigt","midRow","Math","round","row","col","offsetStart","posX","posY","boadCol","push","count","adjustYPosBuilding","height","adjustingFactor","isStreetLeftUpper","adjustYPosStreet","forEach","res","draw","bs","BuildingFactory","player","amount","gameObjects","i","gameObject","village","getElementsByClassName","streets","towns","ResourceFactory","resources","ore","stone","wool","corn","wood","dessert","transformPos","shuffle","a","j","floor","random","shuffleDivChildren","insertBefore","ResourceArea","rf","createOre","createCorn","createStone","createWool","createWood","createDessert","resKey","previousEl","marginnext","next","value","marginLeft","offsetLeft","marginTop","offsetTop","countSlot","ress","NOTINITALISED","START","Game","players","resourceArea","Array","createBuildingState","init","initPlayerArea","bf","allGameObjects","p","createTowns","villages","createVillages","createStreets","playerId","Player","select","getElementsByName","phase","option","text","options","selected","onchange","target","window","onscroll","header","sticky","pageYOffset","classList","remove","resdivs","allocateRes","onclick","allocateResources","shufle","shufleDiv","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","body","appendChild","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","isArray","concat","Function","deps","cached","cache","some","cb"],"mappings":"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I,EAAE,IAAIiC,mBAAJ,CAAiBT,qBAAciH,IAA/B,CADK;AAEXtI,UAAAA,SAAS,EAAE;AAFA,SAAf;AAIAiI,QAAAA,SAAS,CAACtB,IAAV,CAAe,IAAIrB,iBAAJ,CAAa5F,IAAb,EAAmB4B,QAAnB,CAAf;AACH;;AACD,aAAO2G,SAAP;AACH;;;kCAEavI,MAAM8H,QAAQ;AACxB,UAAIS,SAAS,GAAG,EAAhB;;AACA,WAAK,IAAIP,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,MAApB,EAA4BE,CAAC,EAA7B,EAAiC;AAC7B,YAAIpG,QAAQ,GAAG;AACXzB,UAAAA,IAAI,EAAE,IAAIiC,mBAAJ,CAAiBT,qBAAckH,OAA/B,CADK;AAEXvI,UAAAA,SAAS,EAAE;AAFA,SAAf;AAIAiI,QAAAA,SAAS,CAACtB,IAAV,CAAe,IAAIrB,iBAAJ,CAAa5F,IAAb,EAAmB4B,QAAnB,CAAf;AACH;;AACD,aAAO2G,SAAP;AACH;;;;;;;;AC9EL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;ACztBA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;mDAkBUO;;AAhBV,SAASC,OAAT,CAAiBC,CAAjB,EAAoB;AAChB,OAAK,IAAIhB,CAAC,GAAGgB,CAAC,CAAC1J,MAAF,GAAW,CAAxB,EAA2B0I,CAAC,GAAG,CAA/B,EAAkCA,CAAC,EAAnC,EAAuC;AACnC,QAAMiB,CAAC,GAAGxC,IAAI,CAACyC,KAAL,CAAWzC,IAAI,CAAC0C,MAAL,MAAiBnB,CAAC,GAAG,CAArB,CAAX,CAAV;AADmC,eAEpB,CAACgB,CAAC,CAACC,CAAD,CAAF,EAAOD,CAAC,CAAChB,CAAD,CAAR,CAFoB;AAElCgB,IAAAA,CAAC,CAAChB,CAAD,CAFiC;AAE5BgB,IAAAA,CAAC,CAACC,CAAD,CAF2B;AAGtC;;AACD,SAAOD,CAAP;AACH;;AAED,SAASI,kBAAT,CAA4B3L,GAA5B,EAAiC;AAC7B,OAAK,IAAIuK,CAAC,GAAGvK,GAAG,CAAC4B,QAAJ,CAAaC,MAAb,GAAsB,CAAnC,EAAsC0I,C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","file":"src.a2b27638.js","sourceRoot":"..","sourcesContent":["\r\n\r\nexport function addCSSRule(sheet, selector, rules, index) {\r\n    //document.stylesheet[0].cssRules[selector][rules]\r\n    var sheet = sheet ? sheet : document.styleSheets[0];\r\n    var cssRules = sheet.cssRules || sheet.rules;\r\n\r\n    for (var rule of cssRules) {\r\n        if (rule.selectorText === selector) {\r\n\r\n            var ruleParts = rules.split(':');\r\n            rule.style[ruleParts[0]] = ruleParts[1];\r\n            return;\r\n        }\r\n    }\r\n    if (\"insertRule\" in sheet) {\r\n        sheet.insertRule(selector + \"{\" + rules + \"}\", index);\r\n    }\r\n    else if (\"addRule\" in sheet) {\r\n        sheet.addRule(selector, rules, index);\r\n    }\r\n}\r\n\r\nexport function changeClass(instance, className) {\r\n    if (instance.div.className === className) {\r\n        return;\r\n    }\r\n    instance.lastClassname = instance.div.className;\r\n    instance.div.className = className;\r\n}\r\n\r\nexport function addClass(instance, className) {\r\n    if (instance.div.className.includes(className)) {\r\n        return;\r\n    }\r\n    let newClass = instance.div.className + \" \" + className;\r\n    changeClass(instance, newClass);\r\n}\r\n\r\nexport function removeClass(instance, classname) {\r\n    if (!instance.div.className.includes(className)) {\r\n        return;\r\n    }\r\n\r\n    let newClass = instance.div.className.replace(\" \" + classname, \"\");\r\n    changeClass(newClass);\r\n}\r\n\r\n\r\nexport function setPosition(instance, xPos, yPos) {\r\n    instance.div.style.position = \"absolute\";\r\n\r\n    switch (typeof xPos) {\r\n        case \"number\":\r\n            instance.div.style.left = xPos + 'px';\r\n            instance.div.style.top = yPos + 'px';\r\n            break;\r\n        case \"string\":\r\n            instance.div.style.left = xPos;\r\n            instance.div.style.top = yPos;\r\n            break;\r\n    }\r\n}\r\n","import { addCSSRule, changeClass, addClass, setPosition } from \"./domUtils\";\r\n\r\nlet baseUrl = process.env.BASE_URL;\r\nlet instanceMap = new Map();\r\n\r\nexport default class MyHtmlElement {\r\n    constructor({ id = null, className = null, div = null, dragable = false, src = null, parent = null } = {}) {\r\n        this.div = div || document.createElement(\"div\");\r\n        this.div.id = id || div.id;\r\n        this.div.className = className || div.className;\r\n        this.classNameDefault = this.div.className;\r\n        this.lastClassName = this.div.className;\r\n        this.div.dragable = dragable,\r\n        this.div.src = baseUrl + src;\r\n        this.parent = parent || MyHtmlElement.getElementById(this.div.id);\r\n\r\n        if (!instanceMap.has(id))\r\n            instanceMap.set(id, this);\r\n    }\r\n\r\n    static getElementById(id) {\r\n        return instanceMap.get(id);\r\n    }\r\n\r\n    isEmpty() {\r\n        return this.div.children.length <= 0;\r\n    }\r\n\r\n    getChild() {\r\n        return instanceMap.get(this.div.children[0].id)\r\n    }\r\n\r\n    add(child, callbackChild) {\r\n        if (child === undefined) return;\r\n\r\n        if (child instanceof MyHtmlElement)\r\n            this.div.append(child.div);\r\n        else\r\n            this.div.append(child)\r\n\r\n        if (callbackChild) callbackChild.call(child);\r\n    }\r\n\r\n    setPos(xPos, yPos) {\r\n        setPosition(this, xPos, yPos);\r\n    }\r\n\r\n    addClass(classname) {\r\n        addClass(this, classname);\r\n    }\r\n\r\n    changeClass(className) {\r\n        changeClass(this, className);\r\n    }\r\n\r\n    removeClass(classname) {\r\n        removeClass(this, classname)\r\n    }\r\n\r\n    addCSSRule(sheet, selector, rules, index) {\r\n        addCSSRule(sheet, selector, rules, index);\r\n    }\r\n}","import MyHtmlElement from \"./htmlElement\";\r\n\r\nlet idCounter = 0;\r\n\r\nexport let draggingBuilding;\r\n\r\nexport default class Building extends MyHtmlElement {\r\n    constructor(game, details) {\r\n        super({\r\n            id: \"player\" + details.owner + \"-\" + details.type.name + \"\" + idCounter++,\r\n            className: \"game-object \" + details.type.name,\r\n            div: document.createElement(\"img\"),\r\n            draggable: true,\r\n            src: details.imgSource\r\n        })\r\n        this.game = game;\r\n        this.type = details.type;\r\n        this.owner = details.owner;\r\n        this.playerArea = new MyHtmlElement({ div: details.ownerArea })\r\n        this.div.style.filter = details.color;\r\n    }\r\n\r\n    initEventListener() {\r\n        this.div.ondragstart = this.dragStart.bind(this);\r\n        this.div.ondragend = this.dragEnd.bind(this);\r\n    }\r\n\r\n    isPlayed() {\r\n        return this.div.draggable;\r\n    }\r\n\r\n    setPlayed() {\r\n        this.div.draggable = false;\r\n        draggingBuilding = null;\r\n        setTimeout(() => this.addClass(\"played-\" + this.type.name), 50)\r\n    }\r\n\r\n    setUnplayed() {\r\n        this.div.draggable = true;\r\n        setTimeout(() => this.changeClass(this.classNameDefault), 0)\r\n    }\r\n\r\n    draw() {\r\n        this.playerArea.add(this);\r\n        this.initEventListener();\r\n    }\r\n\r\n    dragStart() {\r\n        this.addClass(\"hold\");\r\n        draggingBuilding = this;\r\n        let draggingEvent = new Event(\"dragging\");\r\n        this.game.div.dispatchEvent(draggingEvent)\r\n        setTimeout(() => (this.changeClass(\"invisible\")), 0)\r\n    }\r\n\r\n    dragEnd() {\r\n        let draggingEvent = new Event(\"draggingend\");\r\n        this.game.div.dispatchEvent(draggingEvent)\r\n        this.changeClass(this.classNameDefault);\r\n    }\r\n}","export const slotTypes = {\r\n    \"building\": { name: \"building\" },\r\n    \"street\": { name: \"street\" },\r\n    \"resource\": { name: \"resource\" },\r\n}\r\n\r\nexport const buildingTypes = {\r\n    \"town\": { name: \"town\", slotType: slotTypes.building },\r\n    \"village\": { name: \"village\", slotType: slotTypes.building },\r\n    \"street\": { name: \"street\", slotType: slotTypes.street },\r\n}\r\n\r\nexport let resourceTypes = {\r\n    \"wool\": { name: \"wool\", slotType: slotTypes.resource },\r\n    \"ore\": { name: \"ore\", slotType: slotTypes.resource },\r\n    \"stone\": { name: \"stone\", slotType: slotTypes.resource },\r\n    \"corn\": { name: \"corn\", slotType: slotTypes.resource },\r\n    \"wood\": { name: \"wood\", slotType: slotTypes.resource },\r\n    \"dessert\": { name: \"dessert\", slotType: slotTypes.resource },\r\n}\r\n\r\nexport class TypeObject {\r\n    constructor(name, args) {\r\n        this.name = name;\r\n        if (args) {\r\n            for (var arg in args) {\r\n                this[arg] = args[arg];\r\n            }\r\n        }\r\n    }\r\n\r\n    isEqual(object) {\r\n        return object ? this.name === object.name : false;\r\n    }\r\n}\r\n\r\nexport class SlotType extends TypeObject {\r\n    constructor(name, args) {\r\n        super(name, args)\r\n    }\r\n}\r\n\r\nexport class BuildingType extends TypeObject {\r\n    constructor(type, args) {\r\n        super(type.name, args);\r\n        this.slotType = new SlotType(type.slotType.name);\r\n    }\r\n\r\n    isEqual(object) {\r\n        return object ? this.name === object.name && this.slotType.isEqual(object.slotType) : false;\r\n    }\r\n}\r\n\r\nexport class ResourceType extends TypeObject {\r\n    constructor(type, args) {\r\n        super(type.name, args);\r\n        this.slotType = new SlotType(type.slotType.name);\r\n    }\r\n}\r\n\r\n","import { buildingTypes, slotTypes } from \"./types\";\r\n\r\nexport default class BuildingRules {\r\n\r\n    constructor(game, slot, building, logResult) {\r\n        this.game = game;\r\n        this.slot = slot;\r\n        this.building = building;\r\n\r\n        this.logResult = logResult || true;\r\n        this.lastResult = \"\";\r\n    }\r\n\r\n    onlyOneBuildingPerSlot() {\r\n        if (this.building.type.isEqual(buildingTypes.town) \r\n            && !this.slot.isEmpty()\r\n            && !this.slot.getChild().type.isEqual(buildingTypes.town)) {\r\n            return true;\r\n        }\r\n        return this.slot.isEmpty();\r\n    }\r\n\r\n    onlyBuildingsAtCornors() {\r\n        if (this.slot.type.isEqual(slotTypes.street) || this.building.type.slotType.isEqual(this.slot.type)\r\n            && this.slot.type.isEqual(slotTypes.building)) {\r\n            return true;\r\n        }\r\n\r\n        if(this.logResult) this.lastResult = \"onlyBuildingsAtCornors\";\r\n        return false;\r\n    }\r\n\r\n    onlyStreetsWithBuildings() {\r\n        if (!this.slot.type.isEqual(slotTypes.street)) {\r\n            return true;\r\n        }\r\n        let stateY = this.slot.position.boardRow;\r\n        let stateX = this.slot.position.boardCol;\r\n        let state = this.game.buildingState;\r\n        let neigbours = [\r\n            // direct neighbours - are always building or nothing because of #onlyBuildingsAtCornors\r\n            { y: -1, x: 0 },\r\n            { y: 1, x: 0 },\r\n            { y: -1, x: 1 },\r\n            { y: -1, x: -1 },\r\n            { y: 1, x: -1 },\r\n            { y: 1, x: 1 },\r\n\r\n            // second degree neigbours - are always streets\r\n            { y: -2, x: 1 },\r\n            { y: -2, x: -1 },\r\n            { y: 2, x: 1 },\r\n            { y: 2, x: -1 },\r\n            { y: 0, x: -2 },\r\n            { y: 0, x: 2 },\r\n        ]\r\n        \r\n        for(var n of neigbours){\r\n            if (n.y + stateY < 0 || n.y + stateY >= state.length ) {\r\n                continue;\r\n            }\r\n\r\n            if (n.x + stateX < 0 || n.x + stateX >= state[stateY].length) {\r\n                continue;\r\n            }\r\n\r\n            if (state[n.y + stateY][n.x + stateX ] > 0) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        if (this.logResult) this.lastResult = \"onlyStreetsWithBuildings\";\r\n        return false;\r\n    }\r\n\r\n    twoStreetsBetweenBuildings(ignoreBuildingOnStreet) {\r\n        if (!this.slot.type.isEqual(slotTypes.building)) {\r\n            return true;\r\n        }\r\n        let stateY = this.slot.position.boardRow;\r\n        let stateX = this.slot.position.boardCol;\r\n        let state = this.game.buildingState;\r\n        let hasBuildingDirectNeighbour = false; \r\n        let hasStreetDirectNeigbour = false;\r\n        \r\n        let streetSlotNeighbours = [\r\n            // direct neighbours - are always building or nothing because of #onlyBuildingsAtCornors\r\n            { y: -1, x: 0 },\r\n            { y: 1, x: 0 },\r\n            { y: -1, x: 1 },\r\n            { y: -1, x: -1 },\r\n            { y: 1, x: -1 },\r\n            { y: 1, x: 1 },\r\n        ]\r\n        let buildingSlotNeighbours = [\r\n            // second degree neigbours - are always streets\r\n            { y: -2, x: 0 }, // to-top\r\n            { y: 2, x: 0 }, // to-bottom\r\n            { y: 2, x: 2 }, // right-lower \r\n            { y: 2, x: -2 }, // left-lower \r\n            { y: -2, x: 2 }, // right-upper \r\n            { y: -2, x: -2 }, // left-upper \r\n        \r\n        ]\r\n\r\n        for (var n of buildingSlotNeighbours) {\r\n            if (n.y + stateY < 0 || n.y + stateY >= state.length) {\r\n                continue;\r\n            }\r\n\r\n            if (n.x + stateX < 0 || n.x + stateX >= state[stateY].length) {\r\n                continue;\r\n            }\r\n\r\n            if (state[n.y + stateY][n.x + stateX] > 0) {\r\n                hasBuildingDirectNeighbour = true;\r\n                break;\r\n            }\r\n        }\r\n        \r\n        if (ignoreBuildingOnStreet) {\r\n            return !hasBuildingDirectNeighbour;\r\n        }\r\n\r\n        for (var n of streetSlotNeighbours) {\r\n            if (n.y + stateY < 0 || n.y + stateY >= state.length) {\r\n                continue;\r\n            }\r\n\r\n            if (n.x + stateX < 0 || n.x + stateX >= state[stateY].length) {\r\n                continue;\r\n            }\r\n\r\n            if (state[n.y + stateY][n.x + stateX] > 0) {\r\n                // has direct street neighbour\r\n                hasStreetDirectNeigbour = true ;\r\n                break;\r\n            }\r\n        }\r\n        if (this.logResult) this.lastResult = \"twoStreetsBetweenBuildings\"; \r\n        return !hasBuildingDirectNeighbour && hasStreetDirectNeigbour;\r\n    }\r\n\r\n    citiesBuildOnlyOnTowns() {\r\n        if (!this.building.type.isEqual(buildingTypes.town)) {\r\n            return true;\r\n        }\r\n\r\n        if (this.slot.type.isEqual(slotTypes.building)\r\n            && this.building.type.slotType.isEqual(this.slot.type) \r\n            && this.game.buildingState[this.slot.position.boardRow][this.slot.position.boardCol] >= 1) {\r\n            return true;\r\n        }\r\n        if (this.logResult) this.lastResult = \"citiesBuildOnlyOnTowns\";\r\n        return false;\r\n    }\r\n\r\n    allowed() {\r\n        let ignoreBuildingOnStreet = this.game.currentPhase === this.game.GAME_PHASES.POPULATE;\r\n        \r\n        return this.onlyOneBuildingPerSlot() && this.onlyBuildingsAtCornors()\r\n            && this.onlyStreetsWithBuildings() && this.twoStreetsBetweenBuildings(ignoreBuildingOnStreet) && this.citiesBuildOnlyOnTowns();\r\n    }\r\n\r\n}","import { draggingBuilding} from \"./building\";\r\nimport BuildingRules from \"./ruleEngine\";\r\nimport MyHtmlElement from \"./htmlElement\";\r\nimport { buildingTypes } from \"./types\";\r\n\r\nlet idCounter = 0;\r\n\r\nexport default class BuildingSlot extends MyHtmlElement {\r\n\r\n    constructor(game, board, position, type) {\r\n        super({\r\n            id: type.name + \"_slot\" + idCounter++,\r\n            className: \"circle\",\r\n            div: document.createElement(\"div\"),\r\n            parent: board\r\n        })\r\n\r\n        this.type = type;\r\n        this.game = game;\r\n        this.position = position;\r\n\r\n        game.buildingState[position.boardRow][position.boardCol] = -1;\r\n    }\r\n    add(child) {\r\n        super.add(child,\r\n            () => this.game.buildingState[this.position.boardRow][this.position.boardCol] = 1)\r\n    }\r\n    draw() {\r\n        this.setPos(this.position.x, this.position.y)\r\n        this.parent.add(this);\r\n\r\n        this.initEventListener();\r\n    }\r\n\r\n    initEventListener() {\r\n        this.div.ondragover = this.dragOver.bind(this);\r\n        this.div.ondragenter = this.dragEnter.bind(this);\r\n        this.div.ondragleave = this.dragLeave.bind(this);\r\n        this.div.ondrop = this.dragDrop.bind(this);\r\n\r\n        this.game.div.addEventListener(\"dragging\", this.dragStart.bind(this))\r\n        this.game.div.addEventListener(\"draggingend\", this.dragEnd.bind(this))\r\n    }\r\n\r\n    dragStart() {\r\n        if (!draggingBuilding || !draggingBuilding.type instanceof BuildingSlot) return;\r\n        let buildingRules = new BuildingRules(this.game, this, draggingBuilding, false);\r\n        if (this.isEmpty() && draggingBuilding.type.slotType.isEqual(this.type)\r\n            && buildingRules.allowed()) {\r\n            this.addClass(\"empty\");\r\n        }\r\n    }\r\n\r\n    dragOver(e) {\r\n        if (!draggingBuilding || !draggingBuilding.type instanceof BuildingSlot) return;\r\n        e.preventDefault();\r\n    }\r\n\r\n    dragEnter(e) {\r\n        if (!draggingBuilding || !draggingBuilding.type instanceof BuildingSlot) return;\r\n        e.preventDefault();\r\n        // draggingBuilding.addClass(\"hovered\");\r\n    }\r\n\r\n    dragLeave() {\r\n        if (!draggingBuilding || !draggingBuilding.type instanceof BuildingSlot) return;\r\n        // this.changeClass(this.lastClassname)\r\n    }\r\n\r\n    dragDrop(e) {\r\n        e.preventDefault();\r\n        if (!draggingBuilding || !draggingBuilding.type instanceof BuildingSlot) return;\r\n\r\n        let buildingRules = new BuildingRules(this.game, this, draggingBuilding);\r\n        if (!buildingRules.allowed()) {\r\n            console.log(\"not allowed: \", buildingRules.lastResult)\r\n            return;\r\n        }\r\n\r\n        if (draggingBuilding.type.isEqual(buildingTypes.town)) {\r\n            let lastBuilding = this.getChild();\r\n            lastBuilding.playerArea.add(lastBuilding.div);\r\n            lastBuilding.setUnplayed();\r\n        }\r\n\r\n        // reset highlighting and add\r\n        this.changeClass(this.classNameDefault)\r\n        this.add(draggingBuilding)\r\n\r\n        // restyle dragged gameobject - delay needed setTimeout\r\n        if (this.type.isLeftUpper || this.type.isRightUpper) {\r\n            let classSuffix = this.type.isLeftUpper ? \"left-upper\" : \"right-upper\";\r\n            setTimeout(() => draggingBuilding.addClass(this.type.name + \"-\" + classSuffix), 0)\r\n        }\r\n\r\n        setTimeout(() => draggingBuilding.setPlayed(), 0);\r\n    }\r\n\r\n    dragEnd() {\r\n        if (!draggingBuilding || !draggingBuilding.type instanceof BuildingSlot) return;\r\n        this.changeClass(this.classNameDefault);\r\n    }\r\n}","import MyHtmlElement from \"./htmlElement\";\r\n\r\nlet idCounter = 0;\r\n\r\nexport let draggingResource;\r\n\r\nexport default class Resource extends MyHtmlElement {\r\n    constructor(game, details) {\r\n        let id = idCounter++;\r\n        super({\r\n            id: details.type.name + \"\" + id,\r\n            className: \"resource \" + details.type.name,\r\n            div: document.createElement(\"img\")\r\n        })\r\n        this.idCounter = id;\r\n        this.game = game;\r\n        this.type = details.type;\r\n\r\n        this.div.draggable = true;\r\n        this.div.src = details.imgSource;\r\n    }\r\n\r\n    add(child) {\r\n        super.add(child, () => child.setPlayed());\r\n    }\r\n\r\n    initEventListener() {\r\n        this.div.ondragstart = this.dragStart.bind(this);\r\n        this.div.ondragend = this.dragEnd.bind(this);\r\n    }\r\n\r\n    isPlayed() {\r\n        return !this.div.draggable;\r\n    }\r\n\r\n    setPlayed() {\r\n        this.div.draggable = false;\r\n        this.div.style.margin = null;\r\n        setTimeout(() => this.addClass(\"played-\" + this.type.slotType.name), 50)\r\n    }\r\n\r\n\r\n    draw() {\r\n        this.parent.add(this);\r\n        this.initEventListener();\r\n    }\r\n\r\n\r\n    dragStart() {\r\n\r\n        this.div.className += \" hold\";\r\n        draggingResource = this;\r\n\r\n        let draggingEvent = new Event(\"dragging\");\r\n        this.game.div.dispatchEvent(draggingEvent)\r\n\r\n        setTimeout(() => (this.div.className = \"invisible\"), 0)\r\n    }\r\n\r\n\r\n    dragEnd() {\r\n        let draggingEvent = new Event(\"draggingend\");\r\n        this.game.div.dispatchEvent(draggingEvent)\r\n        draggingResource = null;\r\n        this.div.className = this.classNameDefault;\r\n    }\r\n}","import { draggingResource } from \"./resource\";\r\nimport { addClass, changeClass, removeClass } from \"./domUtils\";\r\nimport MyHtmlElement from \"./htmlElement\";\r\n\r\nlet idCounter = 0;\r\n\r\nexport default class ResourceSlot extends MyHtmlElement{\r\n\r\n    constructor(game, board, position) {\r\n        super({\r\n            id: \"hexagon_\" + idCounter++,\r\n            className: \"hexagon\"\r\n        })\r\n        this.game = game;\r\n        this.board = board;\r\n        this.position = position;\r\n    }\r\n\r\n    add(child) {\r\n        super.add(child, () => child.setPlayed());\r\n    }\r\n\r\n    draw() {\r\n        this.setPos(this.position.x, this.position.y)\r\n        this.board.add(this)\r\n        this.initEventListener()\r\n    }\r\n\r\n    initEventListener() {\r\n        this.div.ondragover = this.dragOver.bind(this);\r\n        this.div.ondragenter = this.dragEnter.bind(this);\r\n        this.div.ondragleave = this.dragLeave.bind(this);\r\n        this.div.ondrop = this.dragDrop.bind(this);\r\n\r\n        this.game.div.addEventListener(\"dragging\", this.dragStart.bind(this))\r\n        this.game.div.addEventListener(\"draggingend\", this.dragEnd.bind(this))\r\n    }\r\n\r\n    dragStart() {\r\n        if (!draggingResource || !draggingResource.type instanceof ResourceSlot) return;\r\n       \r\n        // let buildingRules = new BuildingRules(this.game, this, draggingBuilding);\r\n        if (this.isEmpty() && draggingResource.type.slotType.isEqual(this.type)\r\n            /*&& buildingRules.allowed()*/) {\r\n            addClass(this, \"empty\");\r\n        }\r\n    }\r\n\r\n    dragOver(e) {\r\n        if (!this.isEmpty() || !draggingResource || !draggingResource.type instanceof ResourceSlot) return;\r\n        e.preventDefault();\r\n    }\r\n\r\n    dragEnter(e) {\r\n        if (!this.isEmpty() || !draggingResource || !draggingResource.type instanceof ResourceSlot) return;\r\n        e.preventDefault();\r\n        // this.addClass(\"hovered\");\r\n        addClass(this, \"hovered\");\r\n    }\r\n\r\n    dragLeave() {\r\n        if (!this.isEmpty() || !draggingResource || !draggingResource.type instanceof ResourceSlot) return;\r\n        // this.changeClass(this.lastClassname);\r\n        changeClass(this, this.lastClassname)\r\n\r\n    }\r\n\r\n    dragDrop(e) {\r\n        e.preventDefault();\r\n        if (!this.isEmpty() || !draggingResource || !draggingResource.type instanceof ResourceSlot) return;\r\n\r\n        // reset highlighting and add\r\n        changeClass(this, this.classNameDefault)\r\n        this.add(draggingResource, () => draggingResource.setPlayed());\r\n\r\n    }\r\n\r\n    dragEnd() {\r\n        if (!draggingResource || !draggingResource.type instanceof ResourceSlot) return;\r\n        this.div.className = this.classNameDefault;\r\n    }\r\n}","import BuildingSlot from \"./buildingSlot\";\r\nimport ResourceSlot from \"./resourceSlot\";\r\nimport { slotTypes, SlotType } from \"./types\";\r\nimport MyHtmlElement from \"./htmlElement\";\r\n\r\n\r\n/**\r\n * 0: building slot for villages\r\n * 2: building solot for streets \r\n */\r\nlet boardBuildSlotTemplate = [\r\n    [-1, -1, -1, -1, -1, -1, -1, 0, -1, -1, -1, 0, -1, -1, -1, 0, -1, -1, -1, -1, -1, -1, -1],\r\n    [-1, -1, -1, -1, -1, -1, 2, -1, 2, -1, 2, -1, 2, , 2, -1, 2, -1, -1, -1, -1, -1, -1],\r\n    [-1, -1, -1, -1, -1, 0, -1, -1, -1, 0, -1, -1, -1, 0, -1, -1, -1, 0, -1, -1, -1, -1, -1],\r\n    [-1, -1, -1, -1, -1, 2, -1, -1, -1, 2, -1, -1, -1, 2, -1, -1, -1, 2, -1, -1, -1, -1, -1],\r\n    [-1, -1, -1, -1, -1, 0, -1, -1, -1, 0, -1, -1, -1, 0, -1, -1, -1, 0, -1, -1, -1, -1, -1],\r\n    [-1, -1, -1, -1, 2, -1, 2, -1, 2, -1, 2, -1, 2, -1, 2, -1, 2, -1, 2, -1, -1, -1, -1],\r\n    [-1, -1, -1, 0, -1, -1, -1, 0, -1, -1, -1, 0, -1, -1, -1, 0, -1, -1, -1, 0, -1, -1, -1],\r\n    [-1, -1, -1, 2, -1, -1, -1, 2, -1, -1, -1, 2, -1, -1, -1, 2, -1, -1, -1, 2, -1, -1, -1],\r\n    [-1, -1, -1, 0, -1, -1, -1, 0, -1, -1, -1, 0, -1, -1, -1, 0, -1, -1, -1, 0, -1, -1, -1],\r\n    [-1, -1, 2, -1, 2, -1, 2, -1, 2, -1, 2, -1, 2, -1, 2, -1, 2, -1, 2, -1, 2, -1, -1],\r\n    [-1, 0, -1, -1, -1, 0, -1, -1, -1, 0, -1, -1, -1, 0, -1, -1, -1, 0, -1, -1, -1, 0, -1],\r\n    [-1, 2, -1, -1, -1, 2, -1, -1, -1, 2, -1, -1, -1, 2, -1, -1, -1, 2, -1, -1, -1, 2, -1],\r\n    [-1, 0, -1, -1, -1, 0, -1, -1, -1, 0, -1, -1, -1, 0, -1, -1, -1, 0, -1, -1, -1, 0, -1],\r\n    [-1, -1, 2, -1, 2, -1, 2, -1, 2, -1, 2, -1, 2, -1, 2, -1, 2, -1, 2, -1, 2, -1, -1],\r\n    [-1, -1, -1, 0, -1, -1, -1, 0, -1, -1, -1, 0, -1, -1, -1, 0, -1, -1, -1, 0, -1, -1, -1],\r\n    [-1, -1, -1, 2, -1, -1, -1, 2, -1, -1, -1, 2, -1, -1, -1, 2, -1, -1, -1, 2, -1, -1, -1],\r\n    [-1, -1, -1, 0, -1, -1, -1, 0, -1, -1, -1, 0, -1, -1, -1, 0, -1, -1, -1, 0, -1, -1, -1],\r\n    [-1, -1, -1, -1, 2, -1, 2, -1, 2, -1, 2, -1, 2, -1, 2, -1, 2, -1, 2, -1, -1, -1, -1],\r\n    [-1, -1, -1, -1, -1, 0, -1, -1, -1, 0, -1, -1, -1, 0, -1, -1, -1, 0, -1, -1, -1, -1, -1],\r\n    [-1, -1, -1, -1, -1, 2, -1, -1, -1, 2, -1, -1, -1, 2, -1, -1, -1, 2, -1, -1, -1, -1, -1],\r\n    [-1, -1, -1, -1, -1, 0, -1, -1, -1, 0, -1, -1, -1, 0, -1, -1, -1, 0, -1, -1, -1, -1, -1],\r\n    [-1, -1, -1, -1, -1, -1, 2, -1, 2, , 2, -1, 2, , 2, -1, 2, -1, -1, -1, -1, -1, -1],\r\n    [-1, -1, -1, -1, -1, -1, -1, 0, -1, -1, -1, 0, -1, -1, -1, 0, -1, -1, -1, -1, -1, -1, -1],\r\n]\r\n\r\nexport default class Board extends MyHtmlElement {\r\n\r\n    constructor(game) {\r\n        super({\r\n            div: document.getElementById(\"board\")\r\n        })\r\n        this.game = game;\r\n        this.buildingSlots = [];\r\n        this.resourceSlots = [];\r\n    }\r\n\r\n    init() {\r\n        this.makeRessourceSlots();\r\n        this.makeBuildingSlots();\r\n    };\r\n\r\n    makeRessourceSlots() {\r\n        let template = [\r\n            3, 4, 5, 4, 3\r\n        ]\r\n\r\n        let resourceWidth = 100;\r\n        let resourceHeigt = 100;\r\n        let midRow = Math.round((template.length / 2));\r\n        for (var row = 0; row < template.length; row++) {\r\n            for (var col = 0; col < template[row]; col++) {\r\n                let offsetStart = (resourceWidth * ((template.length - row) % 3));\r\n                if (row >= midRow) {\r\n                    offsetStart = 0;\r\n                }\r\n                let posX =\r\n                    offsetStart // start changes in each row\r\n                    + (col * resourceWidth)// align side by side\r\n                    + (row * resourceWidth / 2) // align betweend two elements relative to previous row\r\n                    - resourceWidth; // if omit then it causes offset \r\n\r\n                let posY = resourceHeigt + row * resourceHeigt * 0.85 - resourceHeigt;\r\n                let position = {\r\n                    x: posX,\r\n                    y: posY,\r\n                    boardRow: row,\r\n                    boadCol: col\r\n                };\r\n                this.resourceSlots.push(\r\n                    new ResourceSlot(this.game, this, position)\r\n                )\r\n            }\r\n        }\r\n    }\r\n\r\n    makeBuildingSlots() {\r\n        let count = 0;\r\n        let adjustYPosBuilding = 0;\r\n        let resourceWidth = 100;\r\n        let height = 100;\r\n\r\n        // cards do not ally proportional, \r\n        // propobably could have fix it by getting the dimensions and positioning of the hexagon streight\r\n        let adjustingFactor = 25.5;\r\n        let isStreetLeftUpper = true;\r\n\r\n        for (var row = 0; row < boardBuildSlotTemplate.length; row++) {\r\n            for (var col = 0; col < boardBuildSlotTemplate[row].length; col++) {\r\n                // adjust pos each fourth row in relation to row\r\n                let posX = 0;\r\n                let posY = 0;\r\n                let slotType = null;\r\n                if (count == 4) {\r\n                    count = 0;\r\n                    adjustYPosBuilding = adjustingFactor * row / 3;\r\n                }\r\n\r\n                if (boardBuildSlotTemplate[row][col] == 0) {\r\n                    slotType = new SlotType(slotTypes.building.name);\r\n                    posX = (col * resourceWidth / 4 - 25);\r\n                    posY = (adjustYPosBuilding + row * (height / 8));\r\n                }\r\n\r\n                if (boardBuildSlotTemplate[row][col] == 2) {\r\n                    slotType = new SlotType(slotTypes.street.name);\r\n                    let adjustYPosStreet = (adjustingFactor * (row - 1) / 3);\r\n                    posX = (col * resourceWidth / 4 - 25);\r\n                    posY = (adjustYPosStreet + row * (height / 8));\r\n                }\r\n\r\n                if (!slotType) {\r\n                    continue;\r\n                }\r\n\r\n                let position = {\r\n                    x: Math.round(posX),\r\n                    y: Math.round(posY),\r\n                    boardRow: row,\r\n                    boardCol: col\r\n                };\r\n                if (row % 4 == 1 && col != 0 && col % 2 == 0) {\r\n                    if (isStreetLeftUpper) {\r\n                        slotType.isLeftUpper = true;\r\n                    }\r\n                    else {\r\n                        slotType.isRightUpper = true;\r\n                    }\r\n                    // every second even col is right\r\n                    isStreetLeftUpper = !isStreetLeftUpper;\r\n                }\r\n\r\n                this.buildingSlots.push(new BuildingSlot(this.game, this, position, slotType, { row: row, col: col }))\r\n            }\r\n\r\n            // first street is always left upper\r\n            isStreetLeftUpper = true;\r\n            count++;\r\n        };\r\n    }\r\n\r\n    draw() {\r\n        this.resourceSlots.forEach((res) => res.draw());\r\n        this.buildingSlots.forEach((bs) => bs.draw());\r\n    }\r\n}","import Building from \"./building\";\r\nimport { buildingTypes, BuildingType } from \"./types\";\r\n\r\nexport default class BuildingFactory {\r\n    constructor() {\r\n    }\r\n\r\n    createVillages(game, player, amount) {\r\n        let gameObjects = [];\r\n        for (var i = 0; i < amount; i++) {\r\n            let gameObject = {\r\n                owner: player.id,\r\n                color: \"sepia(13%) saturate(3207%) hue-rotate(130deg) brightness(95%) contrast(80%)\",\r\n                type: new BuildingType(buildingTypes.village),\r\n                imgSource: \"village.cce71a77.png\",\r\n                ownerArea: game.div.getElementsByClassName(\"player-area-\" + player.id)[0]\r\n            }\r\n            gameObjects.push(new Building(game, gameObject));\r\n        }\r\n        return gameObjects;\r\n    }\r\n\r\n    createStreets(game, player, amount) {\r\n        let streets = [];\r\n        for (var i = 0; i < amount; i++) {\r\n            let street = {\r\n                owner: player.id,\r\n                color: \"sepia(13%) saturate(3207%) hue-rotate(130deg) brightness(95%) contrast(80%)\",\r\n                type: new BuildingType(buildingTypes.street),\r\n                imgSource: \"street.f81d0e7a.png\",\r\n                ownerArea: game.div.getElementsByClassName(\"player-area-\" + player.id)[0]\r\n            }\r\n            streets.push(new Building(game, street));\r\n        }\r\n        return streets;\r\n    }\r\n\r\n    createTowns(game, player, amount) {\r\n        let towns = [];\r\n        for (var i = 0; i < amount; i++) {\r\n            let town = {\r\n                owner: player.id,\r\n                color: \"sepia(13%) saturate(3207%) hue-rotate(130deg) brightness(95%) contrast(80%)\",\r\n                type: new BuildingType(buildingTypes.town),\r\n                imgSource: \"town.ef60d94a.png\",\r\n                ownerArea: game.div.getElementsByClassName(\"player-area-\" + player.id)[0]\r\n            }\r\n            towns.push(new Building(game, town));\r\n        }\r\n        return towns;\r\n    }\r\n}","import { resourceTypes, ResourceType } from \"./types\";\r\nimport Resource from \"./resource\";\r\n\r\nexport default class ResourceFactory {\r\n    constructor() {\r\n\r\n    }\r\n\r\n    createOre(game, amount) {\r\n        let resources = [];\r\n        for (var i = 0; i < amount; i++) {\r\n            let resource = {\r\n                type: new ResourceType(resourceTypes.ore),\r\n                imgSource: \"ore.7a0b032f.png\",\r\n            }\r\n            resources.push(new Resource(game, resource));\r\n        }\r\n        return resources;\r\n    }\r\n\r\n    createStone(game, amount) {\r\n        let resources = [];\r\n        for (var i = 0; i < amount; i++) {\r\n            let resource = {\r\n                type: new ResourceType(resourceTypes.stone),\r\n                imgSource: \"stone.c6e75a2b.png\",\r\n            }\r\n            resources.push(new Resource(game, resource));\r\n        }\r\n        return resources;\r\n    }\r\n\r\n    createWool(game, amount) {\r\n        let resources = [];\r\n        for (var i = 0; i < amount; i++) {\r\n            let resource = {\r\n                type: new ResourceType(resourceTypes.wool),\r\n                imgSource: \"wool.2d2f7543.png\",\r\n            }\r\n            resources.push(new Resource(game, resource));\r\n        }\r\n        return resources;\r\n    }\r\n\r\n    createCorn(game, amount) {\r\n        let resources = [];\r\n        for (var i = 0; i < amount; i++) {\r\n            let resource = {\r\n                type: new ResourceType(resourceTypes.corn),\r\n                imgSource: \"corn.8833e0d8.png\",\r\n            }\r\n            resources.push(new Resource(game, resource));\r\n        }\r\n        return resources;\r\n    }\r\n\r\n    createWood(game, amount) {\r\n        let resources = [];\r\n        for (var i = 0; i < amount; i++) {\r\n            let resource = {\r\n                type: new ResourceType(resourceTypes.wood),\r\n                imgSource: \"wood.b4717aa6.png\",\r\n            }\r\n            resources.push(new Resource(game, resource));\r\n        }\r\n        return resources;\r\n    }\r\n\r\n    createDessert(game, amount) {\r\n        let resources = [];\r\n        for (var i = 0; i < amount; i++) {\r\n            let resource = {\r\n                type: new ResourceType(resourceTypes.dessert),\r\n                imgSource: \"dessert.7a507c76.png\",\r\n            }\r\n            resources.push(new Resource(game, resource));\r\n        }\r\n        return resources;\r\n    }\r\n}","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","import MyHtmlElement from \"./htmlElement\";\r\nimport ResourceFactory from \"./resourceFactory\";\r\nimport 'regenerator-runtime/runtime'\r\n\r\nfunction shuffle(a) {\r\n    for (let i = a.length - 1; i > 0; i--) {\r\n        const j = Math.floor(Math.random() * (i + 1));\r\n        [a[i], a[j]] = [a[j], a[i]];\r\n    }\r\n    return a;\r\n}\r\n\r\nfunction shuffleDivChildren(div) {\r\n    for (let i = div.children.length - 1; i >= 0; i--) {\r\n        const j = Math.floor(Math.random() * (i + 1));\r\n        div.insertBefore(div.children[i], div.children[j]);\r\n    }\r\n    return div;\r\n}\r\n\r\nfunction* transformPos() {\r\n    let i = 0;\r\n    while (true) {\r\n        while (i++ < 3) yield \"marginLeft\";\r\n        while (i-- > 0) yield \"marginTop\";\r\n        while (i++ < 3) yield \"marginRight\";\r\n        while (i-- > 0) yield \"marginBottom\";\r\n    }\r\n}\r\nlet margin = transformPos();\r\n\r\nexport default class ResourceArea extends MyHtmlElement {\r\n    constructor(game) {\r\n        super({\r\n            parent: new MyHtmlElement({ div: document.getElementById(\"resource-area-container\") }),\r\n            div: document.getElementById(\"resource-area\")\r\n        })\r\n\r\n        this.game = game;\r\n        this.resources = {};\r\n    }\r\n\r\n    init() {\r\n        let rf = new ResourceFactory();\r\n        this.resources = {\r\n            ore: rf.createOre(this.game, 3),\r\n            corn: rf.createCorn(this.game, 4),\r\n            stone: rf.createStone(this.game, 3),\r\n            wool: rf.createWool(this.game, 4),\r\n            wood: rf.createWood(this.game, 4),\r\n            dessert: rf.createDessert(this.game, 1),\r\n        };\r\n    }\r\n\r\n    draw() {\r\n        this.parent.add(this);\r\n\r\n        for (var resKey in this.resources) {\r\n            for (var resource of this.resources[resKey]) {\r\n                resource.parent = this;\r\n\r\n                let previousEl = this.div.children[resource.idCounter - 1];\r\n                if (previousEl) {\r\n\r\n                    let marginnext = margin.next().value;\r\n                    switch (marginnext) {\r\n                        case \"marginLeft\":\r\n                            resource.div.style.marginLeft = previousEl.offsetLeft + 10 + \"px\";\r\n                            break;\r\n                        case \"marginTop\":\r\n                            resource.div.style.marginTop = previousEl.offsetTop + 10 + \"px\";\r\n                            resource.div.style.marginLeft = previousEl.offsetLeft + \"px\";\r\n                            break;\r\n                        case \"marginRight\":\r\n                            resource.div.style.marginTop = previousEl.offsetTop + \"px\";\r\n                            resource.div.style.marginLeft = previousEl.offsetLeft - 10 + \"px\";\r\n                            break;\r\n                        case \"marginBottom\":\r\n                            resource.div.style.marginTop = previousEl.offsetTop - 10 + \"px\";\r\n                            resource.div.style.marginLeft = previousEl.offsetLeft + \"px\";\r\n                            break;\r\n                    }\r\n                }\r\n                resource.draw();\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    shufleDiv(div) {\r\n        shuffleDivChildren(div);\r\n    }\r\n\r\n    allocateResources(resources) {\r\n        let countSlot = 0;\r\n        for (let i = resources.length - 1; i >= 0; i--) {\r\n            let ress = MyHtmlElement.getElementById(resources[i].id)\r\n\r\n            if (this.game.board.resourceSlots[countSlot].isEmpty())\r\n                this.game.board.resourceSlots[countSlot].add(ress);\r\n            else\r\n                i++;\r\n\r\n            countSlot++;\r\n        }\r\n    }\r\n}","\r\nimport Board from \"./board\";\r\nimport BuildingFactory from \"./buildingFactory\";\r\nimport MyHtmlElement from \"./htmlElement\";\r\nimport ResourceArea from \"./resourceArea\";\r\n\r\nconst GAME_PHASES = {\r\n    NOTINITALISED: 0,\r\n    POPULATE: 1,\r\n    START: 2\r\n}\r\n\r\nexport default class Game extends MyHtmlElement {\r\n    constructor(players) {\r\n        super({\r\n            div: document.getElementById(\"game\"),\r\n        })\r\n        this.board = new Board(this);\r\n        this.players = players;\r\n        this.buildingState = [[]];\r\n\r\n        this.resourceArea = new ResourceArea(this);\r\n        this.GAME_PHASES = GAME_PHASES;\r\n        this.currentPhase = GAME_PHASES.NOTINITALISED;\r\n        this.resources = null;\r\n    }\r\n\r\n    createBuildingState() {\r\n        let state = new Array(23);\r\n        for(var i=0; i < state.length; i++) {\r\n            state[i] = new Array(23);\r\n        }\r\n        return state;\r\n    }\r\n\r\n    init() {\r\n        this.buildingState = this.createBuildingState()\r\n        this.board.init();\r\n        this.resourceArea.init();\r\n        this.initPlayerArea();\r\n        this.currentPhase = GAME_PHASES.POPULATE;\r\n    }\r\n\r\n    initPlayerArea() {\r\n        let bf = new BuildingFactory();\r\n        let allGameObjects = {};\r\n        this.players.forEach((p) => {\r\n            allGameObjects = {\r\n                towns: bf.createTowns(this, p, 4),\r\n                villages: bf.createVillages(this, p, 5),\r\n                streets: bf.createStreets(this, p, 15),\r\n            }\r\n        } )\r\n\r\n        for(var gameObjects in allGameObjects) {\r\n            for (var gameObject of allGameObjects[gameObjects]){\r\n                gameObject.draw();\r\n            }\r\n        }\r\n    }\r\n\r\n    \r\n    draw() {\r\n        this.board.draw();\r\n        this.resourceArea.draw();\r\n    }\r\n}","\r\nlet playerId = 1;\r\n\r\nexport default class Player {\r\n    constructor() {\r\n        this.id = playerId++;\r\n    }\r\n\r\n}","import Game from \"./game\";\r\nimport Player from \"./player\";\r\nimport MyHtmlElement from \"./htmlElement\";\r\nimport Board from \"./board\";\r\n\r\n\r\nlet players = [new Player()];\r\n\r\nlet game = new Game(players);\r\n\r\nlet select = document.getElementsByName(\"change-state\")[0];\r\n\r\nfor (let phase in game.GAME_PHASES) {\r\n    var option = document.createElement(\"option\");\r\n    option.text = phase;\r\n    option.id = game.GAME_PHASES[phase];\r\n    select.add(option);\r\n}\r\n\r\ngame.init();\r\ngame.draw();\r\n\r\nselect.options[game.currentPhase].selected = true;\r\nselect.onchange = function(e){\r\n    console.log(e.target.value);\r\n    this.currentPhase = this.GAME_PHASES[e.target.value];\r\n}.bind(game);\r\n\r\n\r\nwindow.onscroll = function () {\r\n    var header = document.getElementById(\"header\");\r\n    var sticky = header.offsetTop;\r\n\r\n    if(window.pageYOffset +1 > sticky) {\r\n        header.classList.add(\"sticky\");\r\n    }\r\n    else {\r\n        header.classList.remove(\"sticky\");\r\n    }\r\n}\r\n\r\n\r\nvar resdivs = document.getElementById(\"resource-area\");\r\nlet allocateRes = document.getElementById(\"allocate-resource\");\r\n\r\nallocateRes.onclick = () => {\r\n    game.resourceArea.allocateResources(resdivs.children);\r\n};\r\n\r\nlet shufle = document.getElementById(\"shufle-resources\");\r\nshufle.onclick = () => {\r\n    game.resourceArea.shufleDiv(resdivs);\r\n\r\n};","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}